<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/default_layout}">
    <div layout:fragment="content">
        <!-- Page Title -->
        <div class="breadcrumbs">
            <div class="page-header d-flex align-items-center" style="background-image: url('https://via.placeholder.com/1920x400');">
                <div class="container position-relative">
                    <div class="row d-flex justify-content-center">
                        <div class="col-lg-6 text-center">
                            <h2>Contact</h2>
                            <p>TG와 함께 성공적인 프로젝트를 시작하세요</p>
                        </div>
                    </div>
                </div>
            </div>
            <nav>
                <div class="container">
                    <ol>
                        <li><a th:href="@{/}">Home</a></li>
                        <li>Contact</li>
                    </ol>
                </div>
            </nav>
        </div>

        <!-- Contact Section -->
        <section id="contact" class="contact">
            <div class="container" data-aos="fade-up">
                <div class="row gy-4">
                    <div class="col-lg-6">
                        <div class="row gy-4">
                            <div class="col-md-6">
                                <div class="info-box">
                                    <i class="bi bi-geo-alt"></i>
                                    <h3>Address</h3>
                                    <p th:text="${contact.address}">서울특별시<br>대한민국</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <i class="bi bi-telephone"></i>
                                    <h3>Call Us</h3>
                                    <p th:text="${contact.phone}">+82 2-0000-0000</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <i class="bi bi-envelope"></i>
                                    <h3>Email Us</h3>
                                    <p th:text="${contact.email}">contact@tgin.kr</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <i class="bi bi-clock"></i>
                                    <h3>Open Hours</h3>
                                    <p>월요일 - 금요일<br>9:00AM - 06:00PM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <form id="contactForm" class="php-email-form">
                            <div class="row gy-4">
                                <div class="col-md-6">
                                    <input type="text" name="name" class="form-control" id="contactName" placeholder="이름" required>
                                </div>
                                
                                <div class="col-md-6">
                                    <input type="email" class="form-control" name="email" id="contactEmail" placeholder="이메일" required>
                                </div>
                                
                                <div class="col-md-12">
                                    <input type="text" class="form-control" name="subject" placeholder="제목" required>
                                </div>
                                
                                <div class="col-md-12">
                                    <textarea class="form-control" name="message" id="contactMessage" rows="6" placeholder="메시지" required></textarea>
                                </div>
                                
                                <div class="col-md-12 text-center">
                                    <div id="formMessage" class="alert d-none" role="alert"></div>
                                    
                                    <button type="submit" id="submitBtn">
                                        <span class="btn-text">전송하기</span>
                                        <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section id="team" class="team sections-bg">
            <div class="container" data-aos="fade-up">
                <div class="section-header">
                    <h2>경영진</h2>
                    <p>풍부한 경험과 전문성을 갖춘 경영진이 TG를 이끌어갑니다</p>
                </div>
                
                <div class="row gy-4 justify-content-center">
                    <div class="col-xl-3 col-md-6 d-flex" th:each="leader : ${leadership}" data-aos="fade-up" data-aos-delay="100">
                        <div class="member">
                            <img th:src="@{${leader.image}}" class="img-fluid" alt="" onerror="this.src='https://via.placeholder.com/400x500'">
                            <h4 th:text="${leader.name}">이름</h4>
                            <span th:text="${leader.position}">직책</span>
                            <p th:text="${leader.bio}">약력</p>
                            <div class="social">
                                <a href=""><i class="bi bi-twitter"></i></a>
                                <a href=""><i class="bi bi-facebook"></i></a>
                                <a href=""><i class="bi bi-linkedin"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <style>
            /* UpScale-inspired Contact Page Styles */
            .breadcrumbs .page-header {
                padding: 140px 0 60px 0;
                min-height: 30vh;
                position: relative;
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
            }
            
            .breadcrumbs .page-header:before {
                content: "";
                background-color: rgba(27, 169, 170, 0.8);
                position: absolute;
                inset: 0;
            }
            
            .breadcrumbs .page-header h2 {
                font-size: 56px;
                font-weight: 500;
                color: #fff;
                font-family: var(--bs-font-sans-serif);
            }
            
            .breadcrumbs .page-header p {
                color: rgba(255, 255, 255, 0.8);
            }
            
            .breadcrumbs nav {
                background-color: #f6f9ff;
                padding: 20px 0;
            }
            
            .breadcrumbs nav ol {
                display: flex;
                flex-wrap: wrap;
                list-style: none;
                margin: 0;
                padding: 0;
                font-size: 16px;
                font-weight: 600;
                color: #1BA9AA;
            }
            
            .breadcrumbs nav ol a {
                color: #363d47;
                transition: 0.3s;
                text-decoration: none;
            }
            
            .breadcrumbs nav ol a:hover {
                text-decoration: underline;
            }
            
            .breadcrumbs nav ol li + li {
                padding-left: 10px;
            }
            
            .breadcrumbs nav ol li + li::before {
                display: inline-block;
                padding-right: 10px;
                color: #4278cc;
                content: "/";
            }
            
            /* Contact Section */
            .contact {
                padding: 60px 0;
            }
            
            .contact .info-box {
                padding: 28px 30px;
                background: #fff;
                box-shadow: 0px 0 20px rgba(1, 41, 112, 0.08);
                text-align: center;
                border-radius: 8px;
                height: 100%;
            }
            
            .contact .info-box i {
                font-size: 32px;
                color: #1BA9AA;
                border-radius: 50%;
                padding: 8px;
            }
            
            .contact .info-box h3 {
                font-size: 20px;
                color: #363d47;
                font-weight: 700;
                margin: 10px 0;
            }
            
            .contact .info-box p {
                padding: 0;
                line-height: 24px;
                font-size: 14px;
                margin-bottom: 0;
            }
            
            .contact .php-email-form {
                box-shadow: 0 0 20px rgba(1, 41, 112, 0.08);
                padding: 30px;
                background: #fff;
                border-radius: 8px;
            }
            
            .contact .php-email-form .form-control {
                border-radius: 8px;
                border: 1px solid #e0e5ec;
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .contact .php-email-form .form-control:focus {
                border-color: #1BA9AA;
                box-shadow: 0 0 0 0.2rem rgba(27, 169, 170, 0.25);
            }
            
            .contact .php-email-form button[type=submit] {
                background: #1BA9AA;
                border: 0;
                padding: 12px 40px;
                color: #fff;
                transition: 0.4s;
                border-radius: 50px;
                font-weight: 500;
                cursor: pointer;
            }
            
            .contact .php-email-form button[type=submit]:hover {
                background: #158889;
            }
            
            /* Team Section */
            .team {
                padding: 60px 0;
            }
            
            .team .sections-bg {
                background-color: #f6f9ff;
            }
            
            .team .member {
                text-align: center;
                background: #fff;
                border-radius: 10px;
                padding: 15px;
                overflow: hidden;
                box-shadow: 0px 2px 25px rgba(0, 0, 0, 0.1);
            }
            
            .team .member img {
                border-radius: 10px;
                overflow: hidden;
            }
            
            .team .member .member-info {
                padding: 25px 15px;
            }
            
            .team .member h4 {
                font-weight: 700;
                margin: 15px 0 5px 0;
                font-size: 18px;
                color: #363d47;
            }
            
            .team .member span {
                display: block;
                font-size: 13px;
                font-weight: 400;
                color: #aaaaaa;
            }
            
            .team .member p {
                font-style: italic;
                font-size: 14px;
                line-height: 26px;
                color: #777777;
                margin: 15px 0 0 0;
            }
            
            .team .member .social {
                margin-top: 15px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .team .member .social a {
                transition: color 0.3s;
                color: #363d47;
                margin: 0 10px;
                display: inline-block;
            }
            
            .team .member .social a:hover {
                color: #1BA9AA;
            }
            
            .team .member .social i {
                font-size: 18px;
                margin: 0 2px;
            }
            
            /* Section Header */
            .section-header {
                text-align: center;
                padding-bottom: 40px;
            }
            
            .section-header h2 {
                font-size: 13px;
                letter-spacing: 1px;
                font-weight: 700;
                margin: 0;
                color: #1BA9AA;
                text-transform: uppercase;
            }
            
            .section-header p {
                margin: 10px 0 0 0;
                padding: 0;
                font-size: 38px;
                line-height: 42px;
                font-weight: 700;
                color: #363d47;
            }
            
            .sections-bg {
                background-color: #f6f9ff;
            }
        </style>

        <script th:inline="javascript">
            document.getElementById('contactForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = document.getElementById('submitBtn');
                const btnText = submitBtn.querySelector('.btn-text');
                const spinner = submitBtn.querySelector('.spinner-border');
                const formMessage = document.getElementById('formMessage');
                
                // Disable button and show spinner
                submitBtn.disabled = true;
                btnText.textContent = '전송 중...';
                spinner.classList.remove('d-none');
                formMessage.classList.add('d-none');
                
                const formData = {
                    name: document.getElementById('contactName').value,
                    email: document.getElementById('contactEmail').value,
                    message: document.getElementById('contactMessage').value
                };
                
                try {
                    const response = await fetch('/api/contact/submit', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData)
                    });
                    
                    const result = await response.json();
                    
                    // Show message
                    formMessage.classList.remove('d-none');
                    if (result.ok) {
                        formMessage.classList.remove('alert-danger');
                        formMessage.classList.add('alert-success');
                        formMessage.textContent = result.message || '메시지가 성공적으로 전송되었습니다!';
                        // Reset form
                        document.getElementById('contactForm').reset();
                    } else {
                        formMessage.classList.remove('alert-success');
                        formMessage.classList.add('alert-danger');
                        formMessage.textContent = result.message || '오류가 발생했습니다. 다시 시도해주세요.';
                    }
                } catch (error) {
                    formMessage.classList.remove('d-none', 'alert-success');
                    formMessage.classList.add('alert-danger');
                    formMessage.textContent = '오류가 발생했습니다. 다시 시도해주세요.';
                } finally {
                    // Re-enable button and hide spinner
                    submitBtn.disabled = false;
                    btnText.textContent = '전송하기';
                    spinner.classList.add('d-none');
                }
            });
        </script>
    </div>
</html>
